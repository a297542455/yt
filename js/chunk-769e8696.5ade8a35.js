(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-769e8696","chunk-2d0b90a5","chunk-2d22d9c9"],{"30f8":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:t.handleSearch}},[t._v(t._s(t.$t("search")))]),a("Button",{on:{click:t.handleReset}},[t._v(t._s(t.$t("reset")))])],1)},i=[],n={name:"search-button",props:{params:{type:Object,required:!0}},methods:{handleSearch:function(){this.params.pageNumber=1,this.params.pageSize=10,this.$emit("getList")},handleReset:function(){this.$emit("reset"),this.params.pageNumber=1,this.params.pageSize=10,this.$emit("getList")}}},s=n,o=a("2877"),l=Object(o["a"])(s,r,i,!1,null,null,null);l.options.__file="search-button.vue";e["default"]=l.exports},6123:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"backupStrange"},[a("Row",[a("Col",[a("Card",[a("Row",[a("Form",{ref:"backupStrangeForm",attrs:{model:t.backupStrangeForm,inline:"","label-width":45}},[a("FormItem",{attrs:{label:t.$t("name"),prop:"name"}},[a("Input",{staticStyle:{width:"200px"},attrs:{type:"text",clearable:"",placeholder:t.$t("backupJobDetail.nameTip")},model:{value:t.backupStrangeForm.name,callback:function(e){t.$set(t.backupStrangeForm,"name",e)},expression:"backupStrangeForm.name"}})],1),a("FormItem",{staticClass:"br",staticStyle:{"margin-left":"-35px"}},[a("search-button",{attrs:{params:t.backupStrangeForm},on:{reset:t.reset,getList:t.getBackupStrangeList}})],1)],1)],1),a("table-grid",{attrs:{loading:t.loading,columns:t.columns,data:t.data,total:t.total,delAllUrl:t.delUrl,params:t.backupStrangeForm,exportFromId:t.exportFromId},on:{getList:t.getBackupStrangeList,add:t.add}})],1)],1)],1),a("Modal",{attrs:{title:t.modalTitle,width:600},model:{value:t.modalVisible,callback:function(e){t.modalVisible=e},expression:"modalVisible"}},[a("Form",{ref:"strangeForm",attrs:{model:t.strangeForm,"label-width":90,rules:t.strangeFormValidate}},[a("FormItem",{attrs:{label:t.$t("name"),prop:"name"}},[a("Input",{attrs:{placeholder:t.$t("backupJobDetail.nameTip"),autocomplete:"off"},model:{value:t.strangeForm.name,callback:function(e){t.$set(t.strangeForm,"name",e)},expression:"strangeForm.name"}})],1),a("Row",[a("Col",{attrs:{span:12}},[a("FormItem",{attrs:{label:t.$t("backupStrange.oServer"),prop:"originalServerId"}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:t.$t("backupStrange.oServerTip"),clearable:""},model:{value:t.strangeForm.originalServerId,callback:function(e){t.$set(t.strangeForm,"originalServerId",e)},expression:"strangeForm.originalServerId"}},t._l(t.oServerList,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}))],1)],1),a("Col",{attrs:{span:12}},[a("FormItem",{attrs:{label:t.$t("backupStrange.tServer"),prop:"targetServerId"}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:t.$t("backupStrange.tServerTip"),clearable:""},model:{value:t.strangeForm.targetServerId,callback:function(e){t.$set(t.strangeForm,"targetServerId",e)},expression:"strangeForm.targetServerId"}},t._l(t.tServerList,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}))],1)],1)],1),a("FormItem",{attrs:{label:t.$t("description"),prop:"description"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:5}},model:{value:t.strangeForm.description,callback:function(e){t.$set(t.strangeForm,"description",e)},expression:"strangeForm.description"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text"},on:{click:t.cancelBackupStrange}},[t._v(t._s(t.$t("cancel")))]),a("Button",{attrs:{type:"primary",loading:t.submitLoading},on:{click:t.submitBackupStrange}},[t._v(t._s(t.$t("submit")))])],1)],1)],1)},i=[],n=(a("7f7f"),a("365c")),s=a("f7df"),o=a("30f8"),l={name:"backup-strange",components:{"table-grid":s["default"],"search-button":o["default"]},data:function(){var t=this;return{backupStrangeForm:{name:"",pageNumber:1,pageSize:10,sort:"createTime",order:"desc"},loading:!1,total:0,data:[],columns:[{type:"selection",width:55,align:"center"},{type:"index",width:55,align:"center"},{title:this.$t("name"),key:"name",width:130,align:"center"},{title:this.$t("createTime"),key:"createTime",sortable:!0,width:150,align:"center",sortType:"desc"},{title:this.$t("updateTime"),key:"updateTime",width:150,align:"center",sortable:!0},{title:this.$t("backupStrange.oServer"),key:"originalServerName",width:150,align:"center"},{title:this.$t("backupStrange.tServer"),key:"targetServerName",width:150,align:"center"},{title:this.$t("operation"),key:"action",align:"center",fixed:"right",width:240,render:function(e,a){return e("div",[e("Button",{props:{type:"primary",size:"small",icon:"md-power",shape:"circle"},attrs:{title:t.$t("backupScheduler.runTask")},style:{marginRight:"5px",display:0===a.row.status?"inline-block":"none"},on:{click:function(){t.runTask(a.row)}}},t.$t("start")),e("Button",{props:{type:"warning",size:"small",icon:"md-pause",shape:"circle"},attrs:{title:t.$t("backupScheduler.stopTask")},style:{marginRight:"5px",display:1===a.row.status?"inline-block":"none"},on:{click:function(){t.stopTask(a.row)}}},t.$t("stop")),e("Button",{props:{type:"success",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.viewLog(a.row)}}},t.$t("log")),e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px",display:0===a.row.status?"inline-block":"none"},on:{click:function(){t.edit(a.row)}}},t.$t("edit")),e("Button",{props:{type:"error",size:"small"},style:{display:0===a.row.status?"inline-block":"none"},on:{click:function(){t.remove(a.row)}}},t.$t("delete"))])}}],oServerList:[],tServerList:[],strangeForm:{name:"",originalServerId:"",targetServerId:"",originalPath:"",targetPath:"",description:""},strangeFormValidate:{name:[{required:!0,message:this.$t("backupJobDetail.nameTip"),trigger:"blur"}],originalServerId:[{type:"number",required:!0,message:this.$t("backupStrange.oServerTip"),trigger:"change"}],targetServerId:[{type:"number",required:!0,message:this.$t("backupStrange.tServerTip"),trigger:"change"}],originalPath:[{required:!0,message:this.$t("backupStrange.oPathTip"),trigger:"blur"}],targetPath:[{required:!0,message:this.$t("backupStrange.tPathTip"),trigger:"blur"}]},delUrl:"/backup/web/backup/strange/delByIds",exportFromId:"",modalTitle:"",modalVisible:!1,submitLoading:!1,modalType:0}},methods:{init:function(){this.getBackupStrangeList()},getBackupStrangeList:function(){var t=this;this.loading=!0,Object(n["T"])(this.backupStrangeForm).then(function(e){t.loading=!1,0===e.code&&(t.data=e.content.content,t.total=e.content.totalElements)})},reset:function(){this.$refs.backupStrangeForm.resetFields()},add:function(){this.modalType=0,this.modalTitle=this.$t("backupStrange.addStrange"),this.$refs.strangeForm.resetFields(),this.initServer(),this.modalVisible=!0},edit:function(t){for(var e in this.modalType=1,this.modalTitle=this.$t("backupStrange.editStrange"),this.$refs.strangeForm.resetFields(),this.initServer(),t)null===t[e]&&(t[e]="");var a=JSON.stringify(t),r=JSON.parse(a);this.strangeForm=r,this.modalVisible=!0},remove:function(t){var e=this;this.$Modal.confirm({title:this.$t("confirmDelete"),content:this.$t("backupStrange.delStrangeTip")+" "+t.name+"?",onOk:function(){var a={ids:t.id};Object(n["p"])(e.delUrl,a).then(function(t){0===t.code&&(e.$Message.success(e.$t("deleteSuccess")),e.getBackupStrangeList())})}})},viewLog:function(t){this.$store.commit("setStrangeName",t.name),this.$router.push({name:"backup-strange-log"})},runTask:function(t){var e=this;this.$Modal.confirm({title:this.$t("backupStrange.confirmRun"),content:this.$t("backupStrange.confirmRunTip")+" "+t.name+"?",onOk:function(){var a={id:t.id,originalServerId:t.originalServerId,targetServerId:t.targetServerId};Object(n["yb"])(a).then(function(t){0===t.code&&(e.$Message.success(e.$t("operationSuccess")),e.getBackupStrangeList())})}})},stopTask:function(t){var e=this;this.$Modal.confirm({title:this.$t("backupStrange.confirmStop"),content:this.$t("backupStrange.confirmStopTip")+" "+t.name+"?",onOk:function(){var a={id:t.id,originalServerId:t.originalServerId,targetServerId:t.targetServerId};Object(n["Jb"])(a).then(function(t){0===t.code&&(e.$Message.success(e.$t("operationSuccess")),e.getBackupStrangeList())})}})},initServer:function(){var t=this;Object(n["E"])().then(function(e){0===e.code&&(t.oServerList=e.content,t.tServerList=e.content)})},cancelBackupStrange:function(){this.modalVisible=!1},submitBackupStrange:function(){var t=this;this.$refs.strangeForm.validate(function(e){e&&(t.submitLoading=!0,0===t.modalType&&delete t.strangeForm.id,Object(n["Db"])(t.strangeForm).then(function(e){t.submitLoading=!1,0===e.code&&(t.$Message.success(t.$t("operationSuccess")),t.getBackupStrangeList(),t.modalVisible=!1)}))})}},mounted:function(){this.init()}},c=l,u=a("2877"),d=Object(u["a"])(c,r,i,!1,null,null,null);d.options.__file="backupStrange.vue";e["default"]=d.exports},f7df:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Row",{staticClass:"br",staticStyle:{"margin-bottom":"2vh"}},[this.tableAdd?a("span",[a("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:t.add}},[t._v(t._s(t.$t("add")))])],1):t._e(),this.tableDelAll?a("span",[a("Button",{attrs:{type:"error",icon:"md-trash"},on:{click:t.delAll}},[t._v(t._s(t.$t("batchDelete")))])],1):t._e(),this.tableRefresh?a("span",[a("Button",{attrs:{type:"success",icon:"md-refresh"},on:{click:t.refresh}},[t._v(t._s(t.$t("refresh")))])],1):t._e(),""!==this.exportFromId?a("span",[a("export-button",{attrs:{exportParams:t.params,exportUrl:t.exportUrl,exportFromId:t.exportFromId}})],1):t._e()]),a("Row",[this.tableDelAll?a("span",[a("Alert",{attrs:{"show-icon":""}},[t._v("\n                "+t._s(t.$t("hasSelected"))+" "),a("span",{staticClass:"select-count"},[t._v(t._s(t.selectCount))]),t._v(" "+t._s(t.$t("items"))+"\n                "),a("a",{staticClass:"select-clear",on:{click:t.clearSelectAll}},[t._v(t._s(t.$t("clear")))])])],1):t._e()]),a("Row",[a("Table",{ref:"table",attrs:{loading:t.loading,border:"",columns:t.columns,data:t.data,sortable:"custom"},on:{"on-sort-change":t.changeSort,"on-selection-change":t.showSelect,"on-row-dblclick":t.dblclick}})],1),a("Row",{staticClass:"page",attrs:{type:"flex",justify:"end"}},[a("Page",{attrs:{current:t.pageNumber,total:t.total,"page-size":t.pageSize,"page-size-opts":[10,20,50],size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}})],1)],1)},i=[],n=(a("ac6a"),a("f3e2"),a("c5f6"),a("365c")),s=a("3eac"),o={name:"table-grid",components:{"export-button":s["default"]},data:function(){return{pageNumber:1,pageSize:10,selectCount:0,selectList:[]}},props:{loading:{type:Boolean,required:!0},columns:{type:Array,required:!0},data:{type:Array,required:!0},total:{type:Number,required:!0},delAllUrl:{type:String,default:""},params:{type:Object,required:!0},exportUrl:{type:String,default:""},exportFromId:{type:String,default:""},tableAdd:{type:Boolean,default:!0},tableDelAll:{type:Boolean,default:!0},tableRefresh:{type:Boolean,default:!0}},methods:{add:function(){this.$emit("add")},delAll:function(){var t=this;""!==this.delAllUrl?this.selectCount<=0?this.$Message.warning(this.$t("deleteTip")):this.$Modal.confirm({title:this.$t("confirmDelete"),content:this.$t("deleteContent1")+this.selectCount+this.$t("deleteContent2")+"ï¼Ÿ",onOk:function(){var e="";t.selectList.forEach(function(t){e+=t.id+","}),e=e.substring(0,e.length-1);var a={ids:e};Object(n["p"])(t.delAllUrl,a).then(function(e){0===e.code&&(t.$Message.success(t.$t("deleteSuccess")),t.clearSelectAll(),t.$emit("getList"))})}}):this.$Message.warning(this.$t("deleteInvalidTip"))},refresh:function(){this.$emit("getList")},clearSelectAll:function(){this.$refs.table.selectAll(!1)},changeSort:function(t){this.params.sort=t.key,this.params.order=t.order,"normal"===t.order&&(this.params.order=""),this.$emit("getList")},showSelect:function(t){this.selectList=t,this.selectCount=t.length},changePage:function(t){this.params.pageNumber=t,this.$emit("getList"),this.clearSelectAll()},changePageSize:function(t){this.params.pageSize=t,this.$emit("getList")},dblclick:function(t,e,a){this.$emit("dblclick",t)}}},l=o,c=a("2877"),u=Object(c["a"])(l,r,i,!1,null,null,null);u.options.__file="table-grid.vue";e["default"]=u.exports}}]);